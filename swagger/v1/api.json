{
  "openapi": "3.0.1",
  "info": {
    "title": "API RDV Solidarités V1",
    "version": "v1",
    "description": "# Paramètres généraux de l'API\n\nL'API de RDV-Solidarités vous permet de lire des données dans notre base depuis votre logiciel.\n\nToutes les fonctionnalités de RDV-Solidarités ne sont pas encore disponibles via l’API. Contactez-nous si vous avez besoin de fonctionnalités qui ne sont pas encore présentes.\n\n## Authentification\n\nCertains points de terminaison sont authentifiés. Pour savoir comment y accéder, merci de vous référer à la documentation suivante : [authentification de l'API](https://rdv-solidarites.gitbook.io/guides-pour-rdv-solidarites/tech/api-interconnexions-entrantes/authentification-and-permissions).\n\n## Verbe HTTP\n\nOn utilise les verbes HTTP conventionnels pour manipuler les ressources :\n\n- Lecture: HTTP `GET`\n- Création: HTTP `POST`\n- Mise à jour: HTTP `PUT`\n\n## Versionnage\n\nL'API est versionnée. La version actuelle est 1.0 (référencée comme v1 dans les points de terminaison).\n\n## Routes\n\nLes points de terminaison de l'API sont accessible par une route de la forme : `https://<domain>/api/<version>/<endpoint>`.\n\nAvec :\n\n- `version` est la version de l'API\n- `endpoint` est le nom du point de terminaison\n\nPar exemple, on aura : `https://<domain>/api/v1/organizations`\n\n## Pagination des réponses par listes\n\nTous les points de terminaison qui retournent des listes sont paginés.\n\nLe paramètre (optionnel) `page` permet d'accéder à une page donnée. Sauf précision contraire dans la documentation d'un point de terminaison donné, on retrouve 100 éléments par page.\n\nDe manière générale, tout point de terminaison qui retourne une liste peut retourner une liste vide.\n\n## Erreurs\n\nL'API est susceptible de retourner les erreurs suivantes.\n\n| Code  | Nom                   | Description                            |\n| ----  | --------              | --------                               |\n| `400` | Bad Request           | La requête est invalide                |\n| `401` | Unauthorized          | L'authentification a échoué            |\n| `403` | Forbidden             | La limite autorisée est atteinte       |\n| `404` | Not Found             | La ressource est introuvable           |\n| `500` | Internal Server Error | Une erreur serveur produite            |\n\n## Ressources\n\n### Sérialisation\n\nLes ressources sont les éléments renvoyés par les points de terminaison. Elles sont sérialisées en JSON.\n\n### Champs DateTime\n\nLes champs de type DateTime sont formatés avec la norme ISO 8601.\n"
  },
  "components": {
    "securitySchemes": {
      "access_token": {
        "type": "apiKey",
        "name": "access-token",
        "in": "header"
      },
      "uid": {
        "type": "apiKey",
        "name": "uid",
        "in": "header"
      },
      "client": {
        "type": "apiKey",
        "name": "client",
        "in": "header"
      }
    },
    "schemas": {
      "rdvs": {
        "type": "object",
        "properties": {
          "rdvs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/rdv"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "rdvs",
          "meta"
        ]
      },
      "rdv": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "address": {
            "type": "string"
          },
          "agents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/agent"
            }
          },
          "cancelled_at": {
            "type": "string",
            "nullable": true
          },
          "collectif": {
            "type": "boolean"
          },
          "context": {
            "type": "string",
            "nullable": true
          },
          "created_by": {
            "type": "string",
            "enum": [
              "agent",
              "user",
              "file_attente"
            ]
          },
          "deleted_at": {
            "type": "string",
            "nullable": true
          },
          "duration_in_min": {
            "type": "integer"
          },
          "ends_at": {
            "type": "string"
          },
          "lieu": {
            "$ref": "#/components/schemas/lieu"
          },
          "max_participants_count": {
            "type": "integer",
            "nullable": true
          },
          "motif": {
            "$ref": "#/components/schemas/motif"
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "organisation": {
            "$ref": "#/components/schemas/organisation"
          },
          "rdvs_users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/rdvs_user"
            }
          },
          "starts_at": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": [
              "unknown",
              "waiting",
              "seen",
              "excused",
              "revoked",
              "noshow"
            ]
          },
          "users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/user"
            }
          },
          "users_count": {
            "type": "integer"
          },
          "uuid": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "address",
          "agents",
          "cancelled_at",
          "collectif",
          "context",
          "created_by",
          "deleted_at",
          "duration_in_min",
          "lieu",
          "max_participants_count",
          "motif",
          "name",
          "organisation",
          "rdvs_users",
          "starts_at",
          "status",
          "users",
          "users_count",
          "uuid"
        ]
      },
      "agents": {
        "type": "object",
        "properties": {
          "agents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/agent"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "agents",
          "meta"
        ]
      },
      "agent": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "email": {
            "type": "string"
          },
          "first_name": {
            "type": "string",
            "nullable": true
          },
          "last_name": {
            "type": "string",
            "nullable": true
          }
        },
        "required": [
          "id",
          "email",
          "first_name",
          "last_name"
        ]
      },
      "user_with_root": {
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/user"
          }
        },
        "required": [
          "user"
        ]
      },
      "users": {
        "type": "object",
        "properties": {
          "users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/user"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "users",
          "meta"
        ]
      },
      "user": {
        "type": "object",
        "nullable": true,
        "properties": {
          "id": {
            "type": "integer"
          },
          "address": {
            "type": "string",
            "nullable": true
          },
          "address_details": {
            "type": "string",
            "nullable": true
          },
          "affiliation_number": {
            "type": "string",
            "nullable": true
          },
          "bith_date": {
            "type": "string",
            "format": "date",
            "nullable": true
          },
          "bith_name": {
            "type": "string",
            "nullable": true
          },
          "caisse_affiliation": {
            "type": "string",
            "enum": [
              "aucun",
              "caf",
              "msa"
            ],
            "nullable": true
          },
          "case_number": {
            "type": "string",
            "nullable": true
          },
          "created_at": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "family_situation": {
            "type": "string",
            "enum": [
              "single",
              "in_a_relationship",
              "divorced"
            ],
            "nullable": true
          },
          "first_name": {
            "type": "string"
          },
          "invitation_accepted_at": {
            "type": "string",
            "nullable": true
          },
          "invitation_created_at": {
            "type": "string",
            "nullable": true
          },
          "last_name": {
            "type": "string"
          },
          "notify_by_email": {
            "type": "boolean"
          },
          "notify_by_sms": {
            "type": "boolean"
          },
          "number_of_children": {
            "type": "integer",
            "nullable": true
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "phone_number_formatted": {
            "type": "string",
            "nullable": true
          },
          "responsible": {
            "type": "object",
            "nullable": true
          },
          "responsible_id": {
            "type": "integer",
            "nullable": true
          },
          "user_profiles": {
            "type": "array",
            "nullable": true,
            "items": {
              "$ref": "#/components/schemas/user_profiles"
            }
          }
        },
        "required": [
          "id",
          "address",
          "address_details",
          "affiliation_number",
          "birth_date",
          "birth_name",
          "case_number",
          "created_at",
          "first_name",
          "invitation_accepted_at",
          "invitation_created_at",
          "last_name",
          "notify_by_email",
          "notify_by_sms",
          "phone_number",
          "phone_number_formatted",
          "responsible",
          "responsible_id",
          "user_profiles"
        ]
      },
      "user_profiles": {
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/user",
            "nullable": true
          },
          "organisation": {
            "$ref": "#/components/schemas/organisation"
          },
          "logement": {
            "type": "string",
            "enum": [
              "sdf",
              "heberge",
              "en_accession_propriete",
              "proprietaire",
              "autre",
              "locataire"
            ],
            "nullable": true
          },
          "notes": {
            "type": "string",
            "nullable": true
          }
        },
        "required": [
          "organisation"
        ]
      },
      "organisations": {
        "type": "object",
        "properties": {
          "organisations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/organisation"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "organisations",
          "meta"
        ]
      },
      "organisation": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "name": {
            "type": "string"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          }
        },
        "required": [
          "id",
          "email",
          "name",
          "phone_number"
        ]
      },
      "organizations": {
        "type": "object",
        "properties": {
          "organizations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/organization"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "organizations",
          "meta"
        ]
      },
      "organization": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "label": {
            "type": "string"
          },
          "group_id": {
            "type": "integer"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "website": {
            "type": "string",
            "nullable": true
          },
          "public_link": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "label",
          "group_id",
          "public_link"
        ]
      },
      "invitation": {
        "type": "object",
        "properties": {
          "invitation_url": {
            "type": "string"
          },
          "invitation_token": {
            "type": "string"
          }
        },
        "required": [
          "invitation_url",
          "invitation_token"
        ]
      },
      "lieu": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "address": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "organisation_id": {
            "type": "integer"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "single_use": {
            "type": "boolean"
          }
        },
        "required": [
          "id",
          "address",
          "name",
          "organisation_id",
          "phone_number",
          "single_use"
        ]
      },
      "motif": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "category": {
            "type": "string",
            "enum": [
              "rsa_orientation",
              "rsa_accompagnement",
              "rsa_orientation_on_phone_platform",
              "rsa_cer_signature",
              "rsa_insertion_offer",
              "rsa_follow_up"
            ]
          },
          "deleted_at": {
            "type": "string",
            "nullable": true
          },
          "location_type": {
            "type": "string",
            "enum": [
              "public_office",
              "phone",
              "home"
            ]
          },
          "name": {
            "type": "string"
          },
          "organisation_id": {
            "type": "integer"
          },
          "reservable_online": {
            "type": "boolean"
          },
          "service_id": {
            "type": "integer"
          }
        },
        "required": [
          "id",
          "category",
          "deleted_at",
          "location_type",
          "name",
          "organisation_id",
          "reservable_online",
          "service_id"
        ]
      },
      "rdvs_user": {
        "type": "object",
        "properties": {
          "send_lifecycle_notifications": {
            "type": "boolean"
          },
          "send_reminder_notification": {
            "type": "boolean"
          },
          "status": {
            "type": "string",
            "enum": [
              "unknown",
              "waiting",
              "seen",
              "excused",
              "revoked",
              "noshow"
            ]
          },
          "user": {
            "$ref": "#/components/schemas/user"
          }
        },
        "required": [
          "send_lifecycle_notifications",
          "send_reminder_notification",
          "status",
          "user"
        ]
      },
      "groups": {
        "type": "object",
        "properties": {
          "groups": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/group"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/meta"
          }
        },
        "required": [
          "groups",
          "meta"
        ]
      },
      "group": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string"
          },
          "label": {
            "type": "string"
          }
        },
        "required": [
          "id",
          "label"
        ]
      },
      "meta": {
        "type": "object",
        "properties": {
          "current_page": {
            "type": "integer"
          },
          "next_page": {
            "type": "integer",
            "nullable": true
          },
          "prev_page": {
            "type": "integer",
            "nullable": true
          },
          "total_pages": {
            "type": "integer"
          },
          "total_count": {
            "type": "integer"
          }
        },
        "required": [
          "current_page",
          "next_page",
          "prev_page",
          "total_pages",
          "total_count"
        ]
      },
      "errors_generic": {
        "type": "object"
      },
      "error_authentication": {
        "type": "object",
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "errors"
        ]
      },
      "error_unauthorized": {
        "type": "object",
        "properties": {
          "errors": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "base": {
                  "type": "string"
                }
              },
              "required": [
                "base"
              ]
            }
          }
        },
        "required": [
          "errors"
        ]
      },
      "error_not_found": {
        "type": "object",
        "properties": {
          "not_found": {
            "type": "string"
          }
        },
        "required": [
          "not_found"
        ]
      }
    }
  },
  "tags": [
    {
      "name": "Invitation",
      "description": "Pour manipuler des usager·ères via leur jeton d'invitation"
    },
    {
      "name": "User",
      "description": "Pour manipuler des usager·ères"
    },
    {
      "name": "Agent",
      "description": "Pour manipuler des agent·es"
    },
    {
      "name": "RDV",
      "description": "Pour manipuler des rendez-vous"
    },
    {
      "name": "Group",
      "description": "Pour manipuler des groupes (représentation des territoires)"
    },
    {
      "name": "Organisation",
      "description": "Pour manipuler des organisations"
    },
    {
      "name": "PublicLink",
      "description": "Pour manipuler des liens publics de recherche"
    }
  ],
  "servers": [
    {
      "url": "http://localhost:3000/",
      "description": "Serveur de développement"
    },
    {
      "url": "https://demo.rdv-solidarites.fr",
      "description": "Serveur de démo"
    },
    {
      "url": "https://www.rdv-solidarites.fr",
      "description": "Serveur de production"
    }
  ],
  "paths": {
    "/api/v1/agents": {
      "get": {
        "summary": "Lister les agent·es",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "organisation_id",
            "in": "query",
            "description": "L'ID d'une organisation donnée",
            "example": "123",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "Agent"
        ],
        "operationId": "getAgents",
        "description": "Renvoie les agent·es des organisations accessibles, de manière paginée",
        "responses": {
          "200": {
            "description": "Renvoie les agent·es",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "agents": [
                        {
                          "id": 45,
                          "email": "agent_1@lapin.fr",
                          "first_name": "Adjutor",
                          "last_name": "Leger"
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 1
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/agents"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/groups": {
      "get": {
        "summary": "Lister les groupes (représentation des territoires)",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "Group"
        ],
        "operationId": "getGroups",
        "description": "Renvoie tous les groupes, qui représentent les territoires, de manière paginée",
        "responses": {
          "200": {
            "description": "Retourne des Groups",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "groups": [
                        {
                          "id": 71,
                          "label": "Territoire n°1",
                          "name": "01"
                        },
                        {
                          "id": 72,
                          "label": "Territoire n°2",
                          "name": "02"
                        },
                        {
                          "id": 73,
                          "label": "Territoire n°3",
                          "name": "03"
                        },
                        {
                          "id": 74,
                          "label": "Territoire n°4",
                          "name": "04"
                        },
                        {
                          "id": 75,
                          "label": "Territoire n°5",
                          "name": "05"
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 5
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/groups"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/invitations/{invitation_token}": {
      "get": {
        "summary": "Récupérer un·e usager·ère",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "invitation_token",
            "in": "path",
            "description": "Jeton d'invitation",
            "example": "abcdef123456",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "tags": [
          "Invitation",
          "User"
        ],
        "operationId": "getUserByInvitationToken",
        "description": "Renvoie un·e usager·ère grâce à son jeton d'invitation",
        "responses": {
          "200": {
            "description": "Renvoie l'usager·ère",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "user": {
                        "id": 6,
                        "address": "20 avenue de Ségur, Paris",
                        "address_details": null,
                        "affiliation_number": "39012093812038",
                        "birth_date": "1985-07-20",
                        "birth_name": null,
                        "caisse_affiliation": "caf",
                        "case_number": null,
                        "created_at": "2022-10-31 19:10:11 +0100",
                        "email": "jean@jacques.fr",
                        "family_situation": "divorced",
                        "first_name": "Jean",
                        "invitation_accepted_at": null,
                        "invitation_created_at": "2022-10-31 19:10:11 +0100",
                        "last_name": "JACQUES",
                        "notify_by_email": true,
                        "notify_by_sms": true,
                        "number_of_children": 12,
                        "phone_number": "622352275",
                        "phone_number_formatted": "+33622352275",
                        "responsible": null,
                        "responsible_id": null,
                        "user_profiles": null
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/user_with_root"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "404": {
            "description": "Renvoie 'not_found' quand l'usager·ère n'est pas trouvé·e",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "not_found": "user"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_not_found"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organisations": {
      "get": {
        "summary": "Lister les organisations",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "departement_number",
            "in": "query",
            "description": "Le numéro ou code de département du territoire concerné",
            "example": "26",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "city_code",
            "in": "query",
            "description": "Le code INSEE de la localité",
            "example": "26323",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "tags": [
          "Organisation"
        ],
        "operationId": "getOrganisations",
        "description": "Renvoie toutes les organisations accessibles à l'agent·e authentifié·e, de manière paginée",
        "responses": {
          "200": {
            "description": "Retourne des Organisations",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "organisations": [
                        {
                          "id": 84,
                          "email": null,
                          "name": "Organisation n°1",
                          "phone_number": null
                        },
                        {
                          "id": 85,
                          "email": null,
                          "name": "Organisation n°2",
                          "phone_number": null
                        },
                        {
                          "id": 86,
                          "email": null,
                          "name": "Organisation n°3",
                          "phone_number": null
                        },
                        {
                          "id": 87,
                          "email": null,
                          "name": "Organisation n°4",
                          "phone_number": null
                        },
                        {
                          "id": 88,
                          "email": null,
                          "name": "Organisation n°5",
                          "phone_number": null
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 5
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/organisations"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organizations": {
      "get": {
        "summary": "Lister les organisations",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "group_id",
            "in": "query",
            "description": "ID du Group sur lequel filtrer les organisations",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "Organization"
        ],
        "operationId": "getOrganizations",
        "description": "Renvoie toutes les organisations, de manière paginée",
        "responses": {
          "200": {
            "description": "Retourne les Organisations sous la forme Organizations",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "organizations": [
                        {
                          "id": 104,
                          "email": null,
                          "group_id": 121,
                          "label": "Organisation n°1",
                          "phone_number": null,
                          "public_link": "http://www.rdv-solidarites-test.localhost/org/104",
                          "website": null
                        },
                        {
                          "id": 105,
                          "email": null,
                          "group_id": 122,
                          "label": "Organisation n°2",
                          "phone_number": null,
                          "public_link": "http://www.rdv-solidarites-test.localhost/org/105",
                          "website": null
                        },
                        {
                          "id": 106,
                          "email": null,
                          "group_id": 123,
                          "label": "Organisation n°3",
                          "phone_number": null,
                          "public_link": "http://www.rdv-solidarites-test.localhost/org/106",
                          "website": null
                        },
                        {
                          "id": 107,
                          "email": null,
                          "group_id": 124,
                          "label": "Organisation n°4",
                          "phone_number": null,
                          "public_link": "http://www.rdv-solidarites-test.localhost/org/107",
                          "website": null
                        },
                        {
                          "id": 108,
                          "email": null,
                          "group_id": 125,
                          "label": "Organisation n°5",
                          "phone_number": null,
                          "public_link": "http://www.rdv-solidarites-test.localhost/org/108",
                          "website": null
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 5
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/organizations"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/public_links": {
      "get": {
        "summary": "Lister les liens publics de recherche",
        "tags": [
          "PublicLink"
        ],
        "operationId": "getPublicLinks",
        "description": "Renvoie les liens publics de recherche d'un territoire donné",
        "parameters": [
          {
            "name": "territory",
            "in": "query",
            "description": "Le numéro ou code de département du territoire concerné",
            "example": "26",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Retourne les liens publics de recherche",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "public_links": [
                        {
                          "external_id": "ext_id_A",
                          "public_link": "http://www.rdv-aide-numerique-test.localhost/org/331"
                        },
                        {
                          "external_id": "ext_id_B",
                          "public_link": "http://www.rdv-aide-numerique-test.localhost/org/332"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Retourne 'bad_request' quand le territory est manquant",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "missing": "territory"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Retourne 'not_found' quand le territory ne peut pas être trouvé",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "not_found": "territory"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organisations/{organisation_id}/rdvs": {
      "get": {
        "summary": "Lister les rendez-vous d'une organisation",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "organisation_id",
            "in": "path",
            "description": "Identifiant de l'organisation",
            "example": "20",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "tags": [
          "RDV"
        ],
        "operationId": "getRdvs",
        "description": "Renvoie les RDVs du service dont l'agent fait partie dans cette organisation. Si l'agent est administrateurice ou secrétaire, renvoie tous les RDVs de l'organisation en question.",
        "responses": {
          "200": {
            "description": "Appel API réussi",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "rdvs": [
                        {
                          "id": 8,
                          "address": "1 rue de l'adresse 12345 Ville",
                          "agents": [
                            {
                              "id": 95,
                              "email": "agent_1@lapin.fr",
                              "first_name": "Achaire",
                              "last_name": "Lopéz"
                            }
                          ],
                          "cancelled_at": null,
                          "collectif": false,
                          "context": null,
                          "created_by": "agent",
                          "deleted_at": null,
                          "duration_in_min": 45,
                          "ends_at": "2022-11-03 19:55:26 +0100",
                          "lieu": {
                            "id": 25,
                            "address": "1 rue de l'adresse 12345 Ville",
                            "name": "Lieu n°1",
                            "organisation_id": 341,
                            "phone_number": null,
                            "single_use": false
                          },
                          "max_participants_count": null,
                          "motif": {
                            "id": 39,
                            "category": "rsa_orientation",
                            "deleted_at": null,
                            "location_type": "public_office",
                            "name": "Motif 1",
                            "organisation_id": 343,
                            "reservable_online": true,
                            "service_id": 111
                          },
                          "name": null,
                          "organisation": {
                            "id": 341,
                            "email": null,
                            "name": "Organisation n°1",
                            "phone_number": null
                          },
                          "rdvs_users": [
                            {
                              "send_lifecycle_notifications": true,
                              "send_reminder_notification": true,
                              "status": "unknown",
                              "user": {
                                "id": 10,
                                "address": "20 avenue de Ségur, Paris",
                                "address_details": null,
                                "affiliation_number": "39012093812038",
                                "birth_date": "1985-07-20",
                                "birth_name": null,
                                "caisse_affiliation": "caf",
                                "case_number": null,
                                "created_at": "2022-10-31 19:10:26 +0100",
                                "email": "usager_1@lapin.fr",
                                "family_situation": "divorced",
                                "first_name": "Pétronille",
                                "invitation_accepted_at": null,
                                "invitation_created_at": null,
                                "last_name": "BRUNET",
                                "notify_by_email": true,
                                "notify_by_sms": true,
                                "number_of_children": 12,
                                "phone_number": "0625969298",
                                "phone_number_formatted": "+33625969298",
                                "responsible": null,
                                "responsible_id": null,
                                "user_profiles": null
                              }
                            }
                          ],
                          "starts_at": "2022-11-03 19:10:26 +0100",
                          "status": "unknown",
                          "users": [
                            {
                              "id": 10,
                              "address": "20 avenue de Ségur, Paris",
                              "address_details": null,
                              "affiliation_number": "39012093812038",
                              "birth_date": "1985-07-20",
                              "birth_name": null,
                              "caisse_affiliation": "caf",
                              "case_number": null,
                              "created_at": "2022-10-31 19:10:26 +0100",
                              "email": "usager_1@lapin.fr",
                              "family_situation": "divorced",
                              "first_name": "Pétronille",
                              "invitation_accepted_at": null,
                              "invitation_created_at": null,
                              "last_name": "BRUNET",
                              "notify_by_email": true,
                              "notify_by_sms": true,
                              "number_of_children": 12,
                              "phone_number": "0625969298",
                              "phone_number_formatted": "+33625969298",
                              "responsible": null,
                              "responsible_id": null,
                              "user_profiles": null
                            }
                          ],
                          "users_count": 1,
                          "uuid": "0c7897df-ffa5-4bed-9b3a-be29ecf72514"
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 1
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/rdvs"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}": {
      "get": {
        "summary": "Récupérer un·e usager·ère",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "description": "ID de l'usager·ère",
            "example": 123,
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User"
        ],
        "operationId": "getUser",
        "description": "Renvoie un·e usager·ère",
        "responses": {
          "200": {
            "description": "Renvoie l'usager·ère",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "user": {
                        "id": 35,
                        "address": "20 avenue de Ségur, Paris",
                        "address_details": null,
                        "affiliation_number": "39012093812038",
                        "birth_date": "1985-07-20",
                        "birth_name": null,
                        "caisse_affiliation": "caf",
                        "case_number": null,
                        "created_at": "2022-10-31 19:10:32 +0100",
                        "email": "jean@jacques.fr",
                        "family_situation": "divorced",
                        "first_name": "Jean",
                        "invitation_accepted_at": null,
                        "invitation_created_at": null,
                        "last_name": "JACQUES",
                        "notify_by_email": true,
                        "notify_by_sms": true,
                        "number_of_children": 12,
                        "phone_number": "0660762385",
                        "phone_number_formatted": "+33660762385",
                        "responsible": null,
                        "responsible_id": null,
                        "user_profiles": [
                          {
                            "logement": null,
                            "notes": null,
                            "organisation": {
                              "id": 373,
                              "email": null,
                              "name": "Organisation n°1",
                              "phone_number": null
                            }
                          }
                        ]
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/user_with_root"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "403": {
            "description": "Renvoie 'unauthorized' quand l'usager·ère est lié·e à une autre organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        {
                          "base": "forbidden"
                        }
                      ],
                      "error_messages": [
                        "Vous ne pouvez pas effectuer cette action."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unauthorized"
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Mettre à jour un·e usager·ère",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "description": "ID de l'usager·ère",
            "example": 123,
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "organisation_ids[]",
            "in": "query",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "ID des organisations",
            "example": "[123]",
            "required": false
          },
          {
            "name": "first_name",
            "in": "query",
            "description": "Prénom",
            "example": "Johnny",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "last_name",
            "in": "query",
            "description": "Nom",
            "example": "Silverhand",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "birth_name",
            "in": "query",
            "description": "Nom de naissance",
            "example": "Fripouille",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "birth_date",
            "in": "query",
            "description": "Date de naissance",
            "example": "1976-10-01",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "email",
            "in": "query",
            "description": "Email",
            "example": "johnny@77.com",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "phone_number",
            "in": "query",
            "description": "Numéro de téléphone",
            "example": "33600008012",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "address",
            "in": "query",
            "description": "Adresse",
            "example": "10 rue du Havre, Paris",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "caisse_affiliation",
            "in": "query",
            "description": "Caisse d'affiliation",
            "example": "caf",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "affiliation_number",
            "in": "query",
            "description": "Numéro d'affiliation",
            "example": "101010",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "family_situation",
            "in": "query",
            "description": "Situation familiale",
            "example": "single",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "number_of_children",
            "in": "query",
            "description": "Nombre d'enfants",
            "example": "3",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "notify_by_sms",
            "in": "query",
            "description": "Accepte les notifications par SMS",
            "example": "true",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "notify_by_email",
            "in": "query",
            "description": "Accepte les notifications par email",
            "example": "true",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "responsible_id",
            "in": "query",
            "description": "ID de l'usager·ère responsable",
            "example": 123,
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User"
        ],
        "operationId": "updateUser",
        "description": "Met à jour un·e usager·ère",
        "responses": {
          "200": {
            "description": "Met à jour et renvoie un·e usager·ère",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "user": {
                        "id": 70,
                        "address": "10 rue du Havre, Paris",
                        "address_details": null,
                        "affiliation_number": "101010",
                        "birth_date": "1976-10-01",
                        "birth_name": "Fripouille",
                        "caisse_affiliation": "caf",
                        "case_number": null,
                        "created_at": "2022-10-31 19:10:37 +0100",
                        "email": "jean@jacques.fr",
                        "family_situation": "single",
                        "first_name": "Alain",
                        "invitation_accepted_at": null,
                        "invitation_created_at": null,
                        "last_name": "Verse",
                        "notify_by_email": false,
                        "notify_by_sms": false,
                        "number_of_children": 3,
                        "phone_number": "33600008012",
                        "phone_number_formatted": "+33600008012",
                        "responsible": {
                          "id": 69,
                          "address": "20 avenue de Ségur, Paris",
                          "address_details": null,
                          "affiliation_number": "39012093812038",
                          "birth_date": "1985-07-20",
                          "birth_name": null,
                          "caisse_affiliation": "caf",
                          "case_number": null,
                          "created_at": "2022-10-31 19:10:37 +0100",
                          "email": "usager_1@lapin.fr",
                          "family_situation": "divorced",
                          "first_name": "Guenièvre",
                          "invitation_accepted_at": null,
                          "invitation_created_at": null,
                          "last_name": "BERTIN",
                          "notify_by_email": true,
                          "notify_by_sms": true,
                          "number_of_children": 12,
                          "phone_number": "06 76 63 37 74",
                          "phone_number_formatted": "+33676633774",
                          "responsible": null,
                          "responsible_id": null,
                          "user_profiles": null
                        },
                        "responsible_id": 69,
                        "user_profiles": null
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/user_with_root"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "422": {
            "description": "Des paramètres sont manquants ou mal formés ou impossibles",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "success": false,
                      "errors": {
                        "last_name": [
                          {
                            "error": "blank"
                          }
                        ],
                        "first_name": [
                          {
                            "error": "blank"
                          }
                        ]
                      },
                      "error_messages": [
                        "last_name doit être rempli(e)",
                        "first_name doit être rempli(e)"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/errors_generic"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/{user_id}/invite": {
      "get": {
        "summary": "Récupérer l'invitation d'un usager·ère",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "description": "ID de l'usager·ère",
            "example": 123,
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User",
          "Invitation"
        ],
        "operationId": "getUserInvitation",
        "description": "Renvoie l'URL d'invitation d'un·e usager·ère",
        "responses": {
          "200": {
            "description": "Renvoie l'URL d'invitation de l'usager·ère",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "invitation_url": "http://www.example.com/users/invitation/accept?invitation_token=TN8C4A1T",
                      "invitation_token": "TN8C4A1T"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/invitation"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "403": {
            "description": "Renvoie 'unauthorized' quand l'usager·ère est lié·e à une autre organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        {
                          "base": "forbidden"
                        }
                      ],
                      "error_messages": [
                        "Vous ne pouvez pas effectuer cette action."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unauthorized"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Récupérer l'invitation d'un usager·ère",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "description": "ID de l'usager·ère",
            "example": 123,
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "invite_for",
            "in": "query",
            "description": "Durée souhaitée de l'invitation (en secondes)",
            "example": 86400,
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User",
          "Invitation"
        ],
        "operationId": "createUserInvitation",
        "description": "Renvoie l'URL d'invitation d'un·e usager·ère",
        "responses": {
          "200": {
            "description": "Renvoie l'URL d'invitation de l'usager·ère",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "invitation_url": "http://www.example.com/users/invitation/accept?invitation_token=XYGB3ZZV",
                      "invitation_token": "XYGB3ZZV"
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/invitation"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "403": {
            "description": "Renvoie 'unauthorized' quand l'usager·ère est lié·e à une autre organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        {
                          "base": "forbidden"
                        }
                      ],
                      "error_messages": [
                        "Vous ne pouvez pas effectuer cette action."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unauthorized"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users": {
      "get": {
        "summary": "Récupérer une liste d'usager·rès",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "ids[]",
            "in": "query",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "ID des usager·ères",
            "example": "[123]",
            "required": false
          }
        ],
        "tags": [
          "User"
        ],
        "operationId": "getUsers",
        "description": "Renvoie une liste paginée d'usager·ères",
        "responses": {
          "200": {
            "description": "Renvoie une liste paginée d'usager·ères",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "users": [
                        {
                          "id": 98,
                          "address": "20 avenue de Ségur, Paris",
                          "address_details": null,
                          "affiliation_number": "39012093812038",
                          "birth_date": "1985-07-20",
                          "birth_name": null,
                          "caisse_affiliation": "caf",
                          "case_number": null,
                          "created_at": "2022-10-31 19:10:43 +0100",
                          "email": "usager_1@lapin.fr",
                          "family_situation": "divorced",
                          "first_name": "Agnan",
                          "invitation_accepted_at": null,
                          "invitation_created_at": null,
                          "last_name": "FONTAINE",
                          "notify_by_email": true,
                          "notify_by_sms": true,
                          "number_of_children": 12,
                          "phone_number": "0622141282",
                          "phone_number_formatted": "+33622141282",
                          "responsible": null,
                          "responsible_id": null,
                          "user_profiles": null
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 1
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/users"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Créer un·e usager·ère",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "organisation_ids[]",
            "in": "query",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "ID des organisations",
            "example": "[123]"
          },
          {
            "name": "first_name",
            "in": "query",
            "description": "Prénom",
            "example": "Johnny",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "last_name",
            "in": "query",
            "description": "Nom",
            "example": "Silverhand",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "birth_name",
            "in": "query",
            "description": "Nom de naissance",
            "example": "Fripouille",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "birth_date",
            "in": "query",
            "description": "Date de naissance",
            "example": "1976-10-01",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "email",
            "in": "query",
            "description": "Email",
            "example": "johnny@77.com",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "phone_number",
            "in": "query",
            "description": "Numéro de téléphone",
            "example": "33600008012",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "address",
            "in": "query",
            "description": "Adresse",
            "example": "10 rue du Havre, Paris",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "caisse_affiliation",
            "in": "query",
            "description": "Caisse d'affiliation",
            "example": "caf",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "affiliation_number",
            "in": "query",
            "description": "Numéro d'affiliation",
            "example": "101010",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "family_situation",
            "in": "query",
            "description": "Situation familiale",
            "example": "single",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "number_of_children",
            "in": "query",
            "description": "Nombre d'enfants",
            "example": "3",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "notify_by_sms",
            "in": "query",
            "description": "Accepte les notifications par SMS",
            "example": "true",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "notify_by_email",
            "in": "query",
            "description": "Accepte les notifications par email",
            "example": "true",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "responsible_id",
            "in": "query",
            "description": "ID de l'usager·ère responsable",
            "example": 123,
            "required": false,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User"
        ],
        "operationId": "createUser",
        "description": "Crée un·e usager·ère",
        "responses": {
          "200": {
            "description": "Crée et renvoie un·e usager·ère",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "user": {
                        "id": 139,
                        "address": "10 rue du Havre, Paris",
                        "address_details": null,
                        "affiliation_number": "101010",
                        "birth_date": "1976-10-01",
                        "birth_name": "Fripouille",
                        "caisse_affiliation": "caf",
                        "case_number": null,
                        "created_at": "2022-10-31 19:10:47 +0100",
                        "email": "jean@jacques.fr",
                        "family_situation": "single",
                        "first_name": "Johnny",
                        "invitation_accepted_at": null,
                        "invitation_created_at": null,
                        "last_name": "Silverhand",
                        "notify_by_email": false,
                        "notify_by_sms": false,
                        "number_of_children": 3,
                        "phone_number": "33600008012",
                        "phone_number_formatted": "+33600008012",
                        "responsible": {
                          "id": 138,
                          "address": "20 avenue de Ségur, Paris",
                          "address_details": null,
                          "affiliation_number": "39012093812038",
                          "birth_date": "1985-07-20",
                          "birth_name": null,
                          "caisse_affiliation": "caf",
                          "case_number": null,
                          "created_at": "2022-10-31 19:10:47 +0100",
                          "email": "usager_1@lapin.fr",
                          "family_situation": "divorced",
                          "first_name": "Azeline",
                          "invitation_accepted_at": null,
                          "invitation_created_at": null,
                          "last_name": "DVNIS",
                          "notify_by_email": true,
                          "notify_by_sms": true,
                          "number_of_children": 12,
                          "phone_number": "0686586037",
                          "phone_number_formatted": "+33686586037",
                          "responsible": null,
                          "responsible_id": null,
                          "user_profiles": null
                        },
                        "responsible_id": 138,
                        "user_profiles": null
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/user_with_root"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "422": {
            "description": "Des paramètres sont manquants ou mal formés ou impossibles",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "success": false,
                      "errors": [
                        "param is missing or the value is empty: organisation_ids\nDid you mean?  action\n               first_name\n               controller\n               last_name"
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/errors_generic"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organisations/{organisation_id}/users": {
      "get": {
        "summary": "Récupérer une liste d'usager·rès d'une organisation",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "La page souhaitée",
            "example": "1",
            "required": false,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "organisation_id",
            "in": "path",
            "description": "ID de l'organisation",
            "example": 123,
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User"
        ],
        "operationId": "getUsersFromOrganisation",
        "description": "Renvoie une liste paginée d'usager·ères d'une organisation",
        "responses": {
          "200": {
            "description": "Renvoie une liste paginée d'usager·ères d'une organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "users": [
                        {
                          "id": 149,
                          "address": "20 avenue de Ségur, Paris",
                          "address_details": null,
                          "affiliation_number": "39012093812038",
                          "birth_date": "1985-07-20",
                          "birth_name": null,
                          "caisse_affiliation": "caf",
                          "case_number": null,
                          "created_at": "2022-10-31 19:10:50 +0100",
                          "email": "usager_1@lapin.fr",
                          "family_situation": "divorced",
                          "first_name": "Romuald",
                          "invitation_accepted_at": null,
                          "invitation_created_at": null,
                          "last_name": "DUMAS",
                          "notify_by_email": true,
                          "notify_by_sms": true,
                          "number_of_children": 12,
                          "phone_number": "6 19 42 69 93",
                          "phone_number_formatted": "+33619426993",
                          "responsible": null,
                          "responsible_id": null,
                          "user_profiles": null
                        }
                      ],
                      "meta": {
                        "current_page": 1,
                        "next_page": null,
                        "prev_page": null,
                        "total_pages": 1,
                        "total_count": 1
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/users"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/organisations/{organisation_id}/users/{user_id}": {
      "get": {
        "summary": "Récupérer un·e usager·ère d'une organisation",
        "security": [
          {
            "access_token": [

            ],
            "uid": [

            ],
            "client": [

            ]
          }
        ],
        "parameters": [
          {
            "name": "access-token",
            "in": "header",
            "description": "Token d'accès (authentification)",
            "example": "SFYBngO55ImjD1HOcv-ivQ",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "client",
            "in": "header",
            "description": "Clé client d'accès (authentification)",
            "example": "Z6EihQAY9NWsZByfZ47i_Q",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "uid",
            "in": "header",
            "description": "Identifiant d'accès (authentification)",
            "example": "martine@demo.rdv-solidarites.fr",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "user_id",
            "in": "path",
            "description": "ID de l'usager·ère",
            "example": 123,
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "organisation_id",
            "in": "path",
            "description": "ID de l'organisation",
            "example": 456,
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "tags": [
          "User"
        ],
        "operationId": "getUserFromOrganisation",
        "description": "Renvoie un·e usager·ère",
        "responses": {
          "200": {
            "description": "Renvoie l'usager·ère d'une organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "user": {
                        "id": 154,
                        "address": "20 avenue de Ségur, Paris",
                        "address_details": null,
                        "affiliation_number": "39012093812038",
                        "birth_date": "1985-07-20",
                        "birth_name": null,
                        "caisse_affiliation": "caf",
                        "case_number": null,
                        "created_at": "2022-10-31 19:10:50 +0100",
                        "email": "jean@jacques.fr",
                        "family_situation": "divorced",
                        "first_name": "Jean",
                        "invitation_accepted_at": null,
                        "invitation_created_at": null,
                        "last_name": "JACQUES",
                        "notify_by_email": true,
                        "notify_by_sms": true,
                        "number_of_children": 12,
                        "phone_number": "07 66 15 95 86",
                        "phone_number_formatted": "+33766159586",
                        "responsible": null,
                        "responsible_id": null,
                        "user_profiles": [
                          {
                            "logement": null,
                            "notes": null,
                            "organisation": {
                              "id": 469,
                              "email": null,
                              "name": "Organisation n°1",
                              "phone_number": null
                            }
                          }
                        ]
                      }
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/user_with_root"
                }
              }
            }
          },
          "401": {
            "description": "Problème d'authentification",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        "Vous devez vous connecter ou vous inscrire pour continuer."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_authentication"
                }
              }
            }
          },
          "403": {
            "description": "Renvoie 'unauthorized' quand l'agent ne fait pas partie de l'organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": {
                      "errors": [
                        {
                          "base": "forbidden"
                        }
                      ],
                      "error_messages": [
                        "Vous ne pouvez pas effectuer cette action."
                      ]
                    }
                  }
                },
                "schema": {
                  "$ref": "#/components/schemas/error_unauthorized"
                }
              }
            }
          },
          "404": {
            "description": "Renvoie 'not_found' quand l'usager·ère est lié·e à une autre organisation",
            "content": {
              "application/json": {
                "examples": {
                  "example": {
                    "value": ""
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}